/*! linkphoto */
"use strict";$(document).ready(function(){$.getJSON("cal/eventname",function(a){$.each(a,function(a,b){$("#external-events").append("<div class='fc-event' title_id="+b.id+">"+b.name+"</div>"),$("#external-events .fc-event").each(function(){var a={title:$.trim($(this).text()),title_id:$.trim($(this).attr("title_id"))};$(this).data("eventObject",a),$(this).draggable({zIndex:999,revert:!0,revertDuration:0})})})});var a="Aisa/Shanghai";$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},timezone:a,editable:!0,eventLimit:!0,events:{url:"cal/events_json",error:function(){}},droppable:!0,drop:function(){var a=$(this).data("eventObject"),b=$.extend({},a),c=new Date,d=b.title_id,e=b.start;c.setHours(c.getHours()+8),b.start=c.toJSON(),$("#calendar").fullCalendar("renderEvent",b,!0),$("#drop-remove").is(":checked")&&$(this).remove(),$.post("cal/events/update/",{title_id:d,start:e},function(){console.log("OK")})},eventDrop:function(a){console.log(a.title+" was dropped on "+a.start.format())}})});