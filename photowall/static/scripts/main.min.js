"use strict";$(document).ready(function(){$.getJSON("cal/eventname",function(e){$.each(e,function(e,t){$("#addButton").before("<div class='fc-event' title_id="+t.id+">"+t.name+"</div>"),$("#external-events .fc-event").each(function(){var e={title:$.trim($(this).text()),title_id:$.trim($(this).attr("title_id"))};$(this).data("eventObject",e),$(this).draggable({zIndex:999,revert:!0,revertDuration:0})})})});var e="Aisa/Shanghai";$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},timezone:e,editable:!1,eventLimit:!0,events:{url:"cal/events_json",error:function(){}},droppable:!0,drop:function(){var e=$(this).data("eventObject"),t=$.extend({},e),n=new Date,a=t.title_id;n.setHours(n.getHours()+8),t.start=n.toJSON();var r=t.start;$("#calendar").fullCalendar("renderEvent",t,!0),$("#drop-remove").is(":checked")&&$(this).remove(),$.post("cal/events/update/",{title_id:a,start:r},function(){console.log("OK")})},eventDrop:function(e){console.log(e.title+" was dropped on "+e.start.format())}}),$("#addButton").on("click",function(){$(".form-add-events").css({display:"block"})})});